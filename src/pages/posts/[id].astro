---
import Layout from "@/layouts/Layout.astro";
import { type CollectionEntry, getCollection } from "astro:content";
import { render } from "astro:content";
export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { id: post.id },
		props: post,
	}));
}
type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { Content, remarkPluginFrontmatter } = await render(post);
const { title, date, categories, tags, excerpt } = post.data;

const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).format(date);
---

<Layout title={title}>
  <div class="mx-auto max-w-3xl my-16">
    <header class="flex flex-col items-center gap-4">
      <div class="flex gap-4 justify-center font-semibold text-sky-500">
        {tags && tags.map(tag => (
          <a href="#">{`#${tag}`}</a>
        ))}
      </div>
      <h1 class="font-bold text-4xl">{title}</h1>
      <div class="flex gap-4 justify-center text-sm font-semibold text-muted-foreground">
        <time datetime={date.toISOString()}>{formattedDate}</time>
        <div class="flex gap-2">
          <a href="#" class="hover:text-primary">{categories}</a>
        </div>
        <div>{remarkPluginFrontmatter.minutesRead}</div>
      </div>
    </header>
    <article class="prose dark:prose-invert mt-8">
      <Content />
    </article>
  </div>
</Layout>
