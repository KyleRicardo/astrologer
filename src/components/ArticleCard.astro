---
import type { CollectionEntry } from 'astro:content';

type Props = CollectionEntry<'blog'>;

const post = Astro.props;

const { title, date, categories, tags, excerpt } = post.data;

const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).format(date);
---

<div class="py-2 [&:not(:first-child)]:border-grid [&:not(:first-child)]:border-t">
  <div class="relative group cursor-pointer px-4 py-6 rounded-xl hover:bg-accent">
    <a href={`/posts/${post.id}`} class="absolute inset-0 z-0" />
    <div class="relative z-10 flex flex-col pointer-events-none">
      <h2 class="text-xl font-semibold text-foreground group-hover:text-sky-500 dark:group-hover:text-sky-300">
        {title}
      </h2>
      
      <div class="flex mt-2 gap-4 text-xs font-semibold text-muted-foreground overflow-hidden whitespace-nowrap">
        <time datetime={date.toISOString()}>{formattedDate}</time>
        <div class="flex gap-2">
          <a href="#" class="pointer-events-auto hover:text-foreground">{categories}</a>
        </div>
        {tags && <div class="inline space-x-2">
          {tags.slice(0, 3).map(tag => (
            <a href={`/tags/${tag}`} class="pointer-events-auto text-sky-500 hover:text-primary">#{tag}</a>
          ))}
        </div>
        }
      </div>
    
      <p class="mt-2 text-sm text-muted-foreground leading-loose">
        {excerpt}
      </p>
    </div>
  </div>
</div>
